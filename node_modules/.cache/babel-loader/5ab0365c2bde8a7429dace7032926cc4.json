{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\abanm\\\\Desktop\\\\ADG-Recruitment-Portal-2k20\\\\src\\\\components\\\\Forms\\\\SignUp\\\\ForgotPassword\\\\ForgotPassword.js\";\nimport React, { Component } from \"react\";\nimport Background from \"../../../../hoc/Background/Background\";\nimport axios from \"axios\";\nimport Recaptcha from \"react-google-invisible-recaptcha\";\nimport adggif from \"../../../../assets/img/adggif.gif\";\nexport class ForgotPassword extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      firstPage: true,\n      email: \"\",\n      emailErr: \"\",\n      otp: \"\",\n      otpErr: \"\",\n      newPassword: \"\",\n      newPasswordErr: \"\",\n      confirmPassword: \"\",\n      confirmPasswordErr: \"\",\n      err: \"\",\n      cooldown: 60,\n      loading: false\n    };\n\n    this.forgotPasswordClickHandler = event => {\n      event.preventDefault();\n      var re = /^[a-zA-Z0-9.!#$%&'+=?^_`{|}~-]+@vitstudent.ac.in$/;\n\n      if (this.state.email === \"\") {\n        this.setState({\n          emailErr: \"Please enter your Email ID\"\n        });\n        return;\n      } else if (!re.test(this.state.email)) {\n        this.setState({\n          emailErr: \"Enter a valid Email ID\"\n        });\n        return;\n      }\n\n      const data = JSON.stringify({\n        email: this.state.email\n      });\n      const config = {\n        method: \"post\",\n        url: \"https://adgrecruitments.herokuapp.com/user/resetpassword\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        data: data\n      };\n      this.setState({\n        loading: true\n      });\n      axios(config).then(response => {\n        // console.log(response.data);\n        this.setState({\n          firstPage: false\n        });\n        this.setState({\n          loading: false\n        });\n      }).catch(error => {\n        // console.log(error.response.data);\n        this.setState({\n          loading: false\n        });\n        this.setState({\n          emailErr: error.response.data.message\n        });\n      });\n    };\n\n    this.inputChangeHandler = (e, s) => {\n      this.setState({\n        [s]: e.target.value\n      });\n    };\n\n    this.formSubmitHandler = (e, a) => {\n      e.preventDefault();\n      this.setState({\n        otpErr: \"\"\n      });\n\n      if (!this.state.otp) {\n        this.setState({\n          otpErr: \"Enter valid OTP\"\n        });\n      }\n\n      if (this.state.newPassword.length < 8) {\n        this.setState({\n          newPasswordErr: \"Password must be at least 8 characters\"\n        });\n        this.recaptcha.reset();\n        return;\n      }\n\n      if (this.state.newPassword !== this.state.confirmPassword) {\n        this.setState({\n          confirmPasswordErr: \"Passwords must match\"\n        });\n        this.recaptcha.reset();\n        return;\n      } else {\n        this.recaptcha.execute();\n      }\n    };\n\n    this.onResolved = a => {\n      // alert( 'Recaptcha resolved with response: ' + this.recaptcha.getResponse() );\n      const data = JSON.stringify({\n        // email: this.state.email,\n        otp: this.state.otp,\n        password: this.state.newPassword // confirmPassword: this.state.confirmPassword,\n\n      });\n      const config = {\n        method: \"PUT\",\n        url: \"https://adgrecruitments.herokuapp.com/user/updatepassword\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        data: data\n      };\n      axios(config).then(function (response) {\n        // console.log(JSON.stringify(response.data));\n        a.history.push(\"/login\");\n      }).catch(function (error) {\n        // console.log(error);\n        alert(error.response.data.message);\n      });\n    };\n\n    this.countdown = () => {\n      let cooldownTimer = setInterval(() => {\n        this.setState({\n          cooldown: this.state.cooldown - 1\n        });\n\n        if (this.state.cooldown <= 0) {\n          this.setState({\n            cooldown: 0\n          });\n          clearInterval(cooldownTimer);\n        }\n      }, 1000);\n    };\n  }\n\n  render() {\n    const loader = /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"65px auto\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: adggif,\n        height: 105,\n        alt: \"ADG gif loader\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 4\n    }, this);\n\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(Background, {\n        children: loader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Background, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: event => {\n            event.preventDefault();\n          },\n          children: this.state.firstPage ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"heading\",\n              children: \"Forgot Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-grp\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                type: \"text\",\n                placeholder: \"Enter Email\",\n                value: this.state.email,\n                onChange: event => {\n                  this.inputChangeHandler(event, \"email\");\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 10\n              }, this), this.state.messageErr !== \"\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"error\",\n                children: this.state.emailErr\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"btn btn-blue lgn-btn\",\n              onClick: event => {\n                event.preventDefault();\n                this.forgotPasswordClickHandler(event);\n                this.countdown();\n                this.setState({\n                  cooldown: 0\n                });\n              },\n              children: \"Send OTP\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 8\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"heading\",\n              children: \"Change Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-grp\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"OTP\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                type: \"number\",\n                placeholder: \"Enter OTP\",\n                value: this.state.otp,\n                onChange: event => {\n                  this.inputChangeHandler(event, \"otp\");\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 10\n              }, this), this.state.otpErr !== \"\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"error\",\n                children: this.state.otpErr\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-grp\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"New Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                type: \"password\",\n                placeholder: \"Enter Password\",\n                value: this.state.newPassword,\n                onChange: event => {\n                  this.inputChangeHandler(event, \"newPassword\");\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 10\n              }, this), this.state.newPasswordErr !== \"\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"error\",\n                children: this.state.newPasswordErr\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-grp\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Confirm Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                type: \"password\",\n                placeholder: \"Confirm Password\",\n                value: this.state.confirmPassword,\n                onChange: event => {\n                  this.inputChangeHandler(event, \"confirmPassword\");\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 10\n              }, this), this.state.confirmPasswordErr !== \"\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"error\",\n                children: this.state.confirmPasswordErr\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"btn btn-blue lgn-btn\",\n                onClick: event => {\n                  event.preventDefault();\n                  this.formSubmitHandler(event, this.props);\n                },\n                children: \"Change Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                disabled: !!this.state.cooldown,\n                className: \"btn btn-blue lgn-btn\",\n                onClick: event => {\n                  event.preventDefault();\n                  this.setState({\n                    cooldown: 60\n                  });\n                  this.forgotPasswordClickHandler(event);\n                  this.countdown();\n                },\n                children: this.state.cooldown > 0 ? this.state.cooldown : \"Resend OTP\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Recaptcha, {\n        ref: ref => this.recaptcha = ref,\n        sitekey: \"6LerFBIaAAAAAPrLv6zWVFAZ7VQYGE8DfbUXyt8r\\r\\n\",\n        onResolved: () => this.onResolved(this.props),\n        onError: () => {\n          alert(\"Captcha Error : Please refresh site and try again\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true);\n  }\n\n}\nexport default ForgotPassword;","map":{"version":3,"sources":["C:/Users/abanm/Desktop/ADG-Recruitment-Portal-2k20/src/components/Forms/SignUp/ForgotPassword/ForgotPassword.js"],"names":["React","Component","Background","axios","Recaptcha","adggif","ForgotPassword","state","firstPage","email","emailErr","otp","otpErr","newPassword","newPasswordErr","confirmPassword","confirmPasswordErr","err","cooldown","loading","forgotPasswordClickHandler","event","preventDefault","re","setState","test","data","JSON","stringify","config","method","url","headers","then","response","catch","error","message","inputChangeHandler","e","s","target","value","formSubmitHandler","a","length","recaptcha","reset","execute","onResolved","password","history","push","alert","countdown","cooldownTimer","setInterval","clearInterval","render","loader","margin","messageErr","display","props","ref"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Background from \"../../../../hoc/Background/Background\";\r\nimport axios from \"axios\";\r\nimport Recaptcha from \"react-google-invisible-recaptcha\";\r\nimport adggif from \"../../../../assets/img/adggif.gif\";\r\n\r\nexport class ForgotPassword extends Component {\r\n\tstate = {\r\n\t\tfirstPage: true,\r\n\t\temail: \"\",\r\n\t\temailErr: \"\",\r\n\t\totp: \"\",\r\n\t\totpErr: \"\",\r\n\t\tnewPassword: \"\",\r\n\t\tnewPasswordErr: \"\",\r\n\t\tconfirmPassword: \"\",\r\n\t\tconfirmPasswordErr: \"\",\r\n\t\terr: \"\",\r\n\t\tcooldown: 60,\r\n\t\tloading: false,\r\n\t};\r\n\tforgotPasswordClickHandler = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tvar re = /^[a-zA-Z0-9.!#$%&'+=?^_`{|}~-]+@vitstudent.ac.in$/;\r\n\r\n\t\tif (this.state.email === \"\") {\r\n\t\t\tthis.setState({ emailErr: \"Please enter your Email ID\" });\r\n\t\t\treturn;\r\n\t\t} else if (!re.test(this.state.email)) {\r\n\t\t\tthis.setState({ emailErr: \"Enter a valid Email ID\" });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst data = JSON.stringify({\r\n\t\t\temail: this.state.email,\r\n\t\t});\r\n\t\tconst config = {\r\n\t\t\tmethod: \"post\",\r\n\t\t\turl: \"https://adgrecruitments.herokuapp.com/user/resetpassword\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\t\t\tdata: data,\r\n\t\t};\r\n\t\tthis.setState({ loading: true });\r\n\r\n\t\taxios(config)\r\n\t\t\t.then((response) => {\r\n\t\t\t\t// console.log(response.data);\r\n\t\t\t\tthis.setState({ firstPage: false });\r\n\t\t\t\tthis.setState({ loading: false });\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\t// console.log(error.response.data);\r\n\t\t\t\tthis.setState({ loading: false });\r\n\t\t\t\tthis.setState({ emailErr: error.response.data.message });\r\n\t\t\t});\r\n\t};\r\n\tinputChangeHandler = (e, s) => {\r\n\t\tthis.setState({ [s]: e.target.value });\r\n\t};\r\n\tformSubmitHandler = (e, a) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tthis.setState({\r\n\t\t\totpErr: \"\",\r\n\t\t});\r\n\r\n\t\tif (!this.state.otp) {\r\n\t\t\tthis.setState({\r\n\t\t\t\totpErr: \"Enter valid OTP\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.state.newPassword.length < 8) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewPasswordErr: \"Password must be at least 8 characters\",\r\n\t\t\t});\r\n\t\t\tthis.recaptcha.reset();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.state.newPassword !== this.state.confirmPassword) {\r\n\t\t\tthis.setState({ confirmPasswordErr: \"Passwords must match\" });\r\n\t\t\tthis.recaptcha.reset();\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tthis.recaptcha.execute();\r\n\t\t}\r\n\t};\r\n\tonResolved = (a) => {\r\n\t\t// alert( 'Recaptcha resolved with response: ' + this.recaptcha.getResponse() );\r\n\t\tconst data = JSON.stringify({\r\n\t\t\t// email: this.state.email,\r\n\t\t\totp: this.state.otp,\r\n\t\t\tpassword: this.state.newPassword,\r\n\t\t\t// confirmPassword: this.state.confirmPassword,\r\n\t\t});\r\n\t\tconst config = {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\turl: \"https://adgrecruitments.herokuapp.com/user/updatepassword\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\t\t\tdata: data,\r\n\t\t};\r\n\r\n\t\taxios(config)\r\n\t\t\t.then(function (response) {\r\n\t\t\t\t// console.log(JSON.stringify(response.data));\r\n\t\t\t\ta.history.push(\"/login\");\r\n\t\t\t})\r\n\t\t\t.catch(function (error) {\r\n\t\t\t\t// console.log(error);\r\n\t\t\t\talert(error.response.data.message);\r\n\t\t\t});\r\n\t};\r\n\r\n\tcountdown = () => {\r\n\t\tlet cooldownTimer = setInterval(() => {\r\n\t\t\tthis.setState({ cooldown: this.state.cooldown - 1 });\r\n\t\t\tif (this.state.cooldown <= 0) {\r\n\t\t\t\tthis.setState({ cooldown: 0 });\r\n\t\t\t\tclearInterval(cooldownTimer);\r\n\t\t\t}\r\n\t\t}, 1000);\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst loader = (\r\n\t\t\t<div style={{ margin: \"65px auto\" }}>\r\n\t\t\t\t<img src={adggif} height={105} alt=\"ADG gif loader\" />\r\n\t\t\t</div>\r\n\t\t);\r\n\t\tif (this.state.loading) {\r\n\t\t\treturn <Background>{loader}</Background>;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Background>\r\n\t\t\t\t\t<form\r\n\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{this.state.firstPage ? (\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className=\"heading\">Forgot Password</div>\r\n\t\t\t\t\t\t\t\t<div className=\"input-grp\">\r\n\t\t\t\t\t\t\t\t\t<label>Email</label>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter Email\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.email}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.inputChangeHandler(\r\n\t\t\t\t\t\t\t\t\t\t\t\tevent,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t{this.state.messageErr !== \"\" && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"error\">\r\n\t\t\t\t\t\t\t\t\t\t\t{this.state.emailErr}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-blue lgn-btn\"\r\n\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tthis.forgotPasswordClickHandler(event);\r\n\t\t\t\t\t\t\t\t\t\tthis.countdown();\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({ cooldown: 0 });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tSend OTP\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className=\"heading\">Change Password</div>\r\n\t\t\t\t\t\t\t\t<div className=\"input-grp\">\r\n\t\t\t\t\t\t\t\t\t<label>OTP</label>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter OTP\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.otp}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.inputChangeHandler(\r\n\t\t\t\t\t\t\t\t\t\t\t\tevent,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"otp\"\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t{this.state.otpErr !== \"\" && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"error\">\r\n\t\t\t\t\t\t\t\t\t\t\t{this.state.otpErr}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"input-grp\">\r\n\t\t\t\t\t\t\t\t\t<label>New Password</label>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter Password\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.newPassword}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.inputChangeHandler(\r\n\t\t\t\t\t\t\t\t\t\t\t\tevent,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"newPassword\"\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t{this.state.newPasswordErr !== \"\" && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"error\">\r\n\t\t\t\t\t\t\t\t\t\t\t{this.state.newPasswordErr}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"input-grp\">\r\n\t\t\t\t\t\t\t\t\t<label>Confirm Password</label>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Confirm Password\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.confirmPassword}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.inputChangeHandler(\r\n\t\t\t\t\t\t\t\t\t\t\t\tevent,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"confirmPassword\"\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t{this.state.confirmPasswordErr !== \"\" && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"error\">\r\n\t\t\t\t\t\t\t\t\t\t\t{this.state.confirmPasswordErr}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-blue lgn-btn\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\tthis.formSubmitHandler(\r\n\t\t\t\t\t\t\t\t\t\t\t\tevent,\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.props\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tChange Password\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tdisabled={!!this.state.cooldown}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-blue lgn-btn\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({ cooldown: 60 });\r\n\t\t\t\t\t\t\t\t\t\t\tthis.forgotPasswordClickHandler(\r\n\t\t\t\t\t\t\t\t\t\t\t\tevent\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\tthis.countdown();\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{this.state.cooldown > 0\r\n\t\t\t\t\t\t\t\t\t\t\t? this.state.cooldown\r\n\t\t\t\t\t\t\t\t\t\t\t: \"Resend OTP\"}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</Background>\r\n\t\t\t\t<Recaptcha\r\n\t\t\t\t\tref={(ref) => (this.recaptcha = ref)}\r\n\t\t\t\t\tsitekey=\"6LerFBIaAAAAAPrLv6zWVFAZ7VQYGE8DfbUXyt8r\r\n\"\r\n\t\t\t\t\tonResolved={() => this.onResolved(this.props)}\r\n\t\t\t\t\tonError={() => {\r\n\t\t\t\t\t\talert(\r\n\t\t\t\t\t\t\t\"Captcha Error : Please refresh site and try again\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ForgotPassword;\r\n"]},"metadata":{},"sourceType":"module"}